(this.webpackJsonpdeploy=this.webpackJsonpdeploy||[]).push([[0],{184:function(e,t,a){},505:function(e,t,a){"use strict";a.r(t);a(180);var r=a(0),n=a.n(r),c=a(16),s=a.n(c),o=(a(184),a(57)),i=a(72),l=a.n(i),d=a(115),u=a(50),h=a(51),j=a(56),m=a(55),b=a(9),p=a(83),g=(a(120),a(515)),x=a(175),O=a(3),f=function(e){var t=e.cartItem,a=e.removeFromCart,r=e.changingQuantity;return Object(O.jsx)("div",{className:"m-3 ",style:{height:"25rem"},children:Object(O.jsxs)(g.a,{style:{height:"30rem",width:"18rem"},children:[Object(O.jsx)(g.a.Img,{className:"mb-3",style:{height:"16rem"},src:t.product.image}),Object(O.jsx)("div",{className:"mb-1",children:Object(O.jsxs)(g.a.Body,{style:{},children:[Object(O.jsxs)(g.a.Title,{children:[" ",t.id," "]}),Object(O.jsxs)("p",{children:["Price:",t.product.price]}),Object(O.jsxs)("div",{class:"btn-group",role:"group","aria-label":"Basic outlined example",children:[Object(O.jsx)("button",{onClick:function(){return r({direction:"increase",id:t.id,cartItem:t})},type:"text",class:"btn btn-outline-primary",children:"+"}),Object(O.jsx)(g.a.Text,{children:t.amount}),Object(O.jsx)("button",{onClick:function(){return r({direction:"decrease",id:t.id,cartItem:t})},type:"button",class:"btn btn-outline-primary",children:"-"})]}),Object(O.jsx)(x.a,{variant:"primary",onClick:function(){return a({id:t.id,cartItem:t,amount:1})},children:"remove from cart"})]})})]})})},v=n.a.createContext({}),y=function(e){return function(t){return Object(O.jsx)(v.Consumer,{children:function(a){return Object(O.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{context:a}))}})}},C=y((function(e){var t=e.context.cart;return console.log("from the cart page",t),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"hero is-primary",children:Object(O.jsx)("div",{className:"hero-body container",children:Object(O.jsx)("h4",{className:"title",children:" Our Shopping cart"})})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column columns is-multiline",children:t[0]&&t.length?t.map((function(t,a){return Object(O.jsx)(f,{cartItem:t,removeFromCart:e.context.removeFromCart,changingQuantity:e.context.changingQuantity},a)})):Object(O.jsx)("div",{className:"column",children:Object(O.jsx)("span",{className:"title has-text-grey-light",children:"No products found!"})})})})]})})),S=a(38),I=a(513),k=y(function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleChange=function(e){var t;return r.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"error",""),t))},r.login=function(e){e.preventDefault();var t=r.state,a=t.username,n=t.password;if(console.log(a,n),!a||!n)return console.log("fill the form"),r.setState({error:"fill the required fields"});r.props.context.login(a,n).then((function(e){e||r.setState({error:"Invalid credentials"})}))},r.state={username:"",password:""},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props.context.user),console.log(this.props.context.products)}},{key:"render",value:function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(I.a,{onSubmit:this.login,children:[Object(O.jsxs)(I.a.Group,{controlId:"formBasicEmail",children:[Object(O.jsx)(I.a.Label,{children:"Email address"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"username",type:"email",placeholder:"Enter email"}),Object(O.jsx)(I.a.Text,{className:"text-muted"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"Password"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"password",type:"password",placeholder:"Password"})]}),Object(O.jsxs)("div",{children:[" ",Object(O.jsx)(x.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),a}(r.Component)),N=function(e){var t=e.product,a=e.addToCart;return Object(O.jsx)("div",{className:"m-3",style:{height:"25rem"},children:Object(O.jsxs)(g.a,{style:{height:"30rem",width:"18rem"},children:[Object(O.jsx)(g.a.Img,{style:{height:"16rem"},src:t.image}),Object(O.jsx)("div",{className:"mb-1",children:Object(O.jsxs)(g.a.Body,{style:{},children:[Object(O.jsx)(g.a.Title,{children:t.name}),Object(O.jsxs)("p",{children:["Price:",t.price]}),Object(O.jsx)(g.a.Text,{children:t.shortDesc}),Object(O.jsxs)("div",{children:[" ",t.stock>0?Object(O.jsxs)("small",{children:[" ",t.stock," stock available "]}):Object(O.jsx)("small",{children:"Out of stock"})]}),Object(O.jsx)(x.a,{variant:"primary",onClick:function(){return a({id:t.name,product:t,amount:1})},children:"Add to Cart"})]})})]})})},w=y((function(e){var t=e.context.products;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"hero is-primary",children:Object(O.jsx)("div",{className:"hero-body container",children:Object(O.jsx)("h4",{className:"title",children:" Our Products"})})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"column columns is-multiline",children:t&&t.length?t.map((function(t,a){return Object(O.jsx)(N,{product:t,addToCart:e.context.addToCart},a)})):Object(O.jsx)("div",{className:"column",children:Object(O.jsx)("span",{className:"title has-text-grey-light",children:"No products found!"})})})})]})})),P=a(58),L=a.n(P),T={name:"",price:"",stock:"",image:"",shortDesc:"",descriptio:""},B=y(function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).save=function(){var e=r.state,t=e.name,a=e.price,n=e.stock,c=e.image,s=e.shortDesc,o=e.description;if(console.log("save called"),t&&a){console.log(t,a,o);var i=Math.random().toString(36).substring(2)+Date.now().toString(36);console.log(i),r.props.context.AddProducts(i,{name:t,price:a,stock:n,image:c,shortDesc:s,description:o},(function(){return r.setState(T)})),r.setState({flash:{status:"in-success",msg:"successfully updated to the server"}})}else r.setState({flash:{status:"in-danger",msg:"please fill the name and th price"}})},r.handleChange=function(e){var t;return r.setState((t={},Object(S.a)(t,e.target.name,e.target.value),Object(S.a)(t,"error",""),t))},r.state=T,r}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state;e.name,e.price,e.stock,e.shortDesc,e.description,this.props.context.user;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:" Add Products "}),Object(O.jsxs)(I.a,{onSubmit:this.save,children:[Object(O.jsxs)(I.a.Group,{controlId:"formBasicEmail",children:[Object(O.jsx)(I.a.Label,{children:"Name"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"name",type:"text",placeholder:"Name of the Product"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"Price"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"price",type:"number",placeholder:"price"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"stock"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"stock",type:"number",placeholder:"stock"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"Image URL"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,name:"image",type:"text",placeholder:"Image URL"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"shortDesc"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,type:"text",name:"shortDesc",placeholder:"Short description"})]}),Object(O.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(O.jsx)(I.a.Label,{children:"Description"}),Object(O.jsx)(I.a.Control,{onChange:this.handleChange,type:"text",name:"description",placeholder:"Description"})]}),Object(O.jsx)(x.a,{onClick:this.save,children:"Submit"})]})]})}}]),a}(r.Component)),D=(a(500),a(512)),A=a(514),F=a(511),G=a(176),J=function(e){Object(j.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).login=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("/login",{email:t,password:a}).catch((function(e){return{status:404,message:"unauthorised user"}}));case 2:if(!0!==e.sent.data){e.next=15;break}return console.log("authentication process cleared"),n={email:t,accessToken:"admin@example.com"===t?0:1},"admin@example.com"===t&&(r.state.admin,!0,r.setState({admin:true}),localStorage.setItem("admin",{admin:true})),c=Object.keys(n).map((function(e){return n[e]})),r.setState({arrUser:c},(function(){})),localStorage.setItem("user",JSON.stringify(n)),b.a,console.log("login fully successed"),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.addToCart=function(e){console.log("cart item form top of the add tocart cartItem",e);var t=r.state.cart;console.log("from top of the addtocart",t),console.log(t),console.log(e.id);var a=t.some((function(t){return t.id===e.id})),n=t.findIndex((function(t){return t.id==e.id}));console.log(n),console.log(a),n>=0?(console.log("count added"),t[n].amount+=e.amount):(console.log("new added"),t.push(e)),console.log("before updating to the state",t),localStorage.setItem("cart",JSON.stringify(t)),r.setState(t),console.log("this is bottom of add to cart  ",r.state.cart)},r.removeFromCart=function(e){var t=r.state.cart,a=t.findIndex((function(t){return t.id==e.id}));console.log(a),t.splice(a,1),localStorage.setItem("cart",JSON.stringify(t)),r.setState(t)},r.changingQuantity=function(e){console.log("change in quantity called",e.direction);var t=r.state.cart,a=t.findIndex((function(t){return t.id==e.id}));console.log(a),"increase"===e.direction?t[a].amount+=1:(t[a].amount-=1,0===t[a].amount&&t.splice(a,1)),localStorage.setItem("cart",JSON.stringify(t)),r.setState(t)},r.AddProducts=function(e,t){console.log(e,t);L.a.post("/addproducts",{id:e,product:t}).then((function(e){console.log(e.data)}))},r.ShowAllProducts=function(){console.log("show all products called")},r.logout=function(){console.log(r.state.user),console.log("logout called");r.state.admin;r.setState({admin:false}),localStorage.setItem("admin",false),r.setState({user:""}),localStorage.removeItem("user")},r.state={user:null,cart:[],products:[],showMenu:null,admin:!1},r.routerRef=n.a.createRef(),r}return Object(h.a)(a,[{key:"render",value:function(){return Object(O.jsx)(v.Provider,{value:Object(o.a)(Object(o.a)({},this.state),{},{login:this.login,addToCart:this.addToCart,cart:this.state.cart,removeFromCart:this.removeFromCart,changingQuantity:this.changingQuantity,AddProducts:this.AddProducts,ShowAllProducts:this.ShowAllProducts}),children:Object(O.jsxs)(p.a,{ref:this.routerRef,children:[Object(O.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(O.jsx)(D.a.Brand,{href:"",children:"Ecommerse"}),Object(O.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsxs)(D.a.Collapse,{id:"basic-navbar-nav",children:[Object(O.jsxs)(A.a,{className:"mr-auto",children:[Object(O.jsx)(A.a.Link,{href:this.state.user?"/cart":"/login",children:"Cart"}),Object(O.jsx)(A.a.Link,{href:"/",children:"Products"}),!0===this.state.admin?Object(O.jsx)(A.a.Link,{href:"/Add-products",children:"Add Products"}):"",Object(O.jsx)(F.a,{title:this.state.user?this.state.user[0]:"account",id:"basic-nav-dropdown",children:this.state.user?Object(O.jsx)(F.a.Item,{onClick:this.logout,children:"Logout"}):Object(O.jsx)(F.a.Item,{href:"/login",children:"Login"})})]}),Object(O.jsxs)(I.a,{inline:!0,children:[Object(O.jsx)(G.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(O.jsx)(x.a,{variant:"outline-success",children:"Search"})]})]})]}),Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{exact:!0,path:"/cart",children:Object(O.jsx)(C,{removeFromCart:this.removeFromCart})}),Object(O.jsx)(b.b,{exact:!0,path:"/",children:Object(O.jsx)(w,{products:this.state.products,addToCart:this.addToCart})}),Object(O.jsx)(b.b,{exact:!0,path:"/Login",children:Object(O.jsx)(k,{login:this.login})}),Object(O.jsx)(b.b,{exact:!0,path:"/Add-products",children:Object(O.jsx)(B,{})})]})]})})}},{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,r,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("/api");case 2:return t=e.sent,console.log(t),a=localStorage.getItem("user"),r=localStorage.getItem("cart"),n=localStorage.getItem("admin"),console.log(n),console.log(a),e.next=11,L.a.get("/products");case 11:c=e.sent,console.log(c.data.products),a=a?JSON.parse(a):null,r=r?JSON.parse(r):[],s=null,s=a?Object.keys(a).map((function(e){return a[e]})):null,this.setState({user:s,products:c.data.products,cart:r,admin:n}),console.log("app",this.state.cart),console.log(this.state.admin);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(r.Component);a(504);s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root"))}},[[505,1,2]]]);
//# sourceMappingURL=main.a5f0fe95.chunk.js.map